При репликации данных нужно обеспечить согласованность этих данных, то есть чтобы данные совпадали на разных репликах. Для описание степени согласованности системы можно использовать такой метод:

N - суммарное количество реплик

R - количество реплик, которые должны подтвердить операцию чтения одинаковых? данных

W - количество реплик, которые должны подтвердить операцию записи

если R + W > N - строгая согласованность данных

R = 1 и W ≤ N - быстрые операции чтения

W = 1 и R ≤ N - быстрые операции записи

R + W ≤ N - слабая согласованность данных

  

Модели согласованности данных:

- Строгая согласованность - данные должны совпадать на всех нодах, то есть ожидание подтверждения актуальности данных со всех реплик и только потом возможность считывания данных
- Слабая согласованность - данные не совпадают на нодах по сравнению с последними операциями записи
- Согласованность в конечном счете - вид слабой согласованности, при котором данные рано или поздно синхронизируются, но не сразу

  

Выбор модели согласованности данных сильно зависит от требований к системе, если разрабатывается банковская система, где очень важно, чтобы получаемые данные были актуальны - для этого используется строгая согласованность, но жертвуем доступностью и латентностью

однако в некоторых случаях можно обеспечить и слабую согласованность данных и согласованность данных в конечном счете

[[Теорема CAP]]
#systemdesign