HTTP 1.1 позволяет обрабатывать лишь один поступивший запрос на одно TCP-соединение, поэтому браузеру приходится устанавливать несколько соединений, чтобы обрабатывать одновременно несколько запросов.
# Мультиплексированные потоки

Пересылаемая через HTTP/2 в обе стороны последовательность текстовых фреймов, которыми обмениваются между собой клиент и сервер, называется “потоком”. В ранних версиях HTTP можно было транслировать только по одному потоку за раз, с небольшой задержкой между разными потоками. Передавать таким способом большие объёмы медиа-контента было слишком неэффективно и ресурсозатратно. Для решение этой проблемы в HTTP/2 применяется новый бинарный слой фреймов.

Этот слой позволяет превратить данные, передаваемые от сервера к клиенту, в управляемую последовательность маленьких независимых фреймов. И при получении всего набора фреймов клиент может восстановить передаваемые данные в исходном виде. Эта схема работает и при передаче в обратном направлении — от клиента к серверу.


- Параллельные мультиплексированные запросы и ответы не блокируют друг друга.
- Несмотря на передачу многочисленных потоков данных, для наибольшей эффективности использования сетевых ресурсов используется одиночное TCP-соединение.
- Задержки ниже, производительность сети выше, лучше ранжирование поисковыми системами.
- В сети и IT-ресурсах уменьшаются операционные расходы и капитальные вложения.

Благодаря описанной возможности, пакеты данных из разных потоков вперемешку передаются через единственное TCP-соединение. В конечной точке эти пакеты затем разделяются и представляются в виде отдельных потоков данных. В HTTP 1.1 и более ранних версиях для параллельной передачи многочисленных запросов пришлось бы устанавливать такое же количество TCP-соединений, что является узким местом с точки зрения общей производительности сети, несмотря на быструю передачу большего количества потоков данных.

Какие преимущества даёт интернет-компаниям и онлайн-сервисам использование двоичных команд:

- Низкие накладные расходы при парсинге данных — критически важное преимущество HTTP/2 по сравнению с HTTP 1.
- Ниже вероятность ошибок.
- Меньше нагрузка на сеть.
- Эффективное использование сетевых ресурсов.
- Решение проблем с безопасностью, наподобие атак с разделением запросов (response splitting attack), проистекающих из текстовой природы HTTP 1.x.
- Реализуются прочие возможности HTTP/2, включая сжатие, мультиплексирование, приоритезацию, управление потоками и эффективную обработку TLS.
- Компактность команд упрощают их обработку и реализацию.
- Выше эффективность и устойчивость к сбоям при обработке данных, передаваемых между клиентом и сервером.
- Снижение сетевой задержки и повышение пропускной способности.


  

КАНЦЕЛЯЦИЯ (например мигратор. пользователь нажал отклонить и процедуру заканчиваем, чтоб ресурсы не тратить)

клиент с сервером общаются через Protocol Buffer

настройка ретраев

три компонента успеха

хелз чеки

  

  

http 1.1 → http 2.0

  

  

// ms-team выключен проверить block()

  

  

  

  

позволяя множеству запросов и ответов передаваться параллельно в рамках одного TCP-соединения. Это уменьшает задержки и увеличивает общую производительность

  

благодаря абстракции RPC клиентское приложение может вызывать методы удаленного сервиса (ms-team), как будто это локальные методы

  

также поддерживаются потоки ответов и потоки запросов

#systemdesign 