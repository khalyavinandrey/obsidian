оптимальные планы запроса строятся на основе статистики - чем полнее статистика - тем более адекватная оценка различных способов выполнения плана запроса - тем точнее и эффективнее будет построен план запроса, соотвественно статистика очень важна в стоимостных оптимизаторах

интегральная информация о данных в таблицах и индексах

хранится в системных таблицах и может быть перенесена в другую базу данных
например с продовой бд в стейджовую, чтобы увидеть как запросы будут планироваться в реальных условиях эксплуатации

собираемые метрики:
* количество строк
* количество занятых страниц
* средний размер строки
по колонкам:
* количество различных значений
* средний размер данных в колонке
* количество неопределенных значений
* минимальное и максимальное хначения

Также собирается статистика по индексам, чтобы оптимизатор мог оценить эффективность использования этих индексов

Метрики индексов:
* глубина - помогает оценить количество страниц, которые нужно будет рассмотреть при поиске значения
* количество листовых страниц - позволяет оценить количество прочитанных страниц при полном просмотре и количество напрасно прочитанных страниц при полном просмотре
* количество ключей на странице
* фактор кластеризации - показывает на сколько близко друг к другу находятся в таблице строки с одинаковым значением индексированного поля и позволяет оценить количество страниц таблицы

#бд 