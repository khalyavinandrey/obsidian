While the controller is entrusted with key administrative operations, the responsibility for electing a controller lies with another party â€” ZooKeeper. In fact, ZooKeeper is itself a cluster of cooperating processes called an ensemble. Every broker node will register its intent with ZooKeeper, but only one will be elected as the controller. ZooKeeper ensures that at most one broker node will be assigned the controller status, and should the controller node fail or leave the cluster, another broker node will promptly take its place. A ZooKeeper ensemble also acts as a consistent and highly available configuration <u>repository of sorts, maintaining cluster metadata, leader-follower states, quotas, user information, access control lists, and other housekeeping items</u>. <u>Owing to the underlying gossiping and consensus protocol of the ZooKeeper ensemble, the number of ZooKeeper nodes must be odd.</u> While ZooKeeper is bundled with Kafka for convenience, it is important to acknowledge that ZooKeeper is not an internal component of Kafka, but an open-source project in its own right.

#effectivekafka