чтобы программа-получатель могла правильно обработать сообщение, сообщение должно содержать заголовок, в этом заголовке определяется протокол, по которому отправляются данные
![[Pasted image 20240902202353.png]]

на транспортном уровне решается проблема адресации сообщения с прикладного уровня процессу, такая адресация называется ПОРТ, тут протоколы: TCP / UDP
при этом сообщение с прикладного уровня приходит сегментированно и к каждому сегменту еще добавляется TCP-заголовок
![[Pasted image 20240902204343.png]]
в заголовке есть порт отправителя и порт получателя

при этом учитывая, что сегменты могут доходить не в том порядке (1), некоторые сегменты могут теряться (2) - протокол TCP был разработан так, чтобы эту гарантию можно было получить

для решения проблемы (1) поток байт нумеруется, первый номер байта указывается в сообщении с прикладного уровня
2 проблема решается путем акноледжа


сообщения складываются в буфер, если буфер переполнится - то сегменты будут отбрасываться, в этом случае в tcp ответе есть еще один раздел под оставшееся место в буфере
![[Pasted image 20240902211910.png]]

есть еще поле контрольной суммы - хэш заголовка и данных для проверки корректности полученных данных, если не совпадет, то просто отбрасывается сегмент

еще согласно протоколу TCP перед тем как начнется передача пакетов - необходимо предварительное соединение
![[Pasted image 20240902212324.png]]



![[Pasted image 20240902212654.png]]


